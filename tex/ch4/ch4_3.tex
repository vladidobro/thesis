\section{Určení anizotropie MLD}
\label{chap:anizotropie-MLD}

Snaha o vystižení anizotropie MLD pomocí vzorce \eqref{eqn:PMLD-naivni} založeném na \eqref{eqn:PMLD} nebyla úspěšná.
Výskyt $\phim$ v argumentu sinu se zakládá na argumentech symetrie; pro plně rotačně symetrické prostředí v rovině rozhraní zanáší magnetizace jediný význačný směr a osa zanesené magneto-optické anizotropie s ní pak musí splývat.
Tento argument však selhává i pro čtyřčetnou rotační symetrii, pak totiž není důvod aby např. $\phim=\SI{10}{\degree}$ zanášelo magneto-optickou anizotropii ve stejném směru.

Správné rozšíření vzorečku by mělo tvar
\begin{equation}
\label{eqn:PMLD-ansatz}
    \Delta\beta = P(\phim) \sin \left( 2\varphi_O(\phim) - 2\beta   \right)
\end{equation}
se směrem optické osy $\varphi_O$, které se už pro neúplnou rotační symetrii nemusí rovnat $\phim$.
V takovém tvaru postihuje MO jevy všech řádů (stejně jako původní izotropní vzorec) a trpí stejnou degenerací jako \eqref{eqn:PMLD-naivni}, takže lze $P$ a $\varphi_O$ určit pouze s nějakým přepokladem (např. kubické symetrie), který degeneraci sejme.

Se vzorečkem \eqref{eqn:PMLD-ansatz} je ještě jeden problém: $\phim$ v něm vystupuje pouze skrze libovolné funkce $P$ a $\varphi_O$, a bez přidaných požadavků na jejich tvar nelze určit magnetickou anizotropii $\phim(\phih)$.
Shodná magnetická anizotropie určená z měření na různých vlnových délkách je ale ve výsledku jediným spolehlivým kritériem, které nás dokáže přesvědčit o správnosti změřených dat.
Přídavný požadavek na $P$ a $\varphi_O$, který zde přijmeme, je takový, že měřené stočení je MO jevem maximálně kvadratickým v magnetizaci vzorku $\vec{M}$.
Uvidíme, že tento požadavek je k určení magnetické anizotropie dostačující (viz oddíl \ref{chap:urceni-magneticke-anizotropie}), tj. zajišťuje vzájemnou jednoznačnost $\Delta\beta$ a $\phim$.
Pro kvalitativní analýzu je vyjádření \eqref{eqn:PMLD-ansatz} užitečné, protože dovoluje posoudit, zda se v měřeném signálu neobjevují MO jevy vyšších řádů\footnote{Např. v případě [111]-normálově orientovaných kubických vzorků, jako bylo pozorováno v \cite{silberQuadraticMagnetoopticKerr2019a}.}.

Vzhledem k libovolnosti funkcí $P$ a $\varphi_O$ je jediná informace obsažená v ansatzu \eqref{eqn:PMLD-ansatz} vzájemná závislost signálu pro různá $\beta$.
Ta je založena na dvou předpokladech.
Zaprvé musí být průchod/odraz přibližně izotropní, tj. nultý člen rozvoje transmisní/reflexní Jonesovy matice (zde obě značíme $\mathcal{R}$) musí být přibližně úměrný jednotkové matici.
V praxi to znamená téměř kolmý dopad a přibližně izotropní tenzor permitivity vzorku.
Označíme odchylku od jednotkové matice $\mathcal{R}'$ a rozdělíme jí na ``nemagnetickou'' a ``magnetickou'' část (po vytknutní celkového faktoru $R_0$).
\begin{align}
\label{eqn:PMLD-Jones}
\mathcal{R}(\vec{M}) &= R_0 \left[ \begin{pmatrix} 1&0\\0&1 \end{pmatrix} + \mathcal{R}'(\vec{M}) \right] \\
                     &= R_0 \left[ \begin{pmatrix} 1&0\\0&1 \end{pmatrix} + \mathcal{R}'_0 + \mathcal{R}'_M(\vec{M}) \right]
\end{align}
Pro jednoduchost zápisu dále vypustíme celkový faktor $R_0$ (pokládáme $R_0=1$), který se ve výpočtu nijak neprojeví.
Pokud je $\mathcal{R}'$ malé, je rozumné uvažovat, že můstek je vyvážen pro stejnou lineární polarizaci, jako je ta dopadající.
Díky tomu je pak možné spočítat, na které prvky reflexní matice je měřený signál citlivý.
Pokud toto splněno není, pak je můstek pro každé $\beta$ citlivý na jiný mix prvků $\mathcal{R}'_M$, a tento mix je složitou funkcí nemagnetické $\mathcal{R}'_0$; vzorec pak nemá jednoduchou $\beta$-závislost \eqref{eqn:PMLD-ansatz}.
Po případném elipsometrickém změření $\mathcal{R}'_0$ je možné správnou $\beta$-závislost dopočítat a dosadit do nového ansatzu, my se tím však v této práci nezabýváme, protože uvedený předpoklad malosti $\mathcal{R}'$ splňujeme.

Pomocí Stokesových kovektorů lze jednoduše vyjádřit stočení a elipticitu do prvního řádu v $\mathcal{R}'$.
Pro dané vstupní $\beta$ (Stokesův vektor $\Stks(\beta)$) zavedeme kovektory\footnote{Argument $\beta$ zde značí, pro jaké $\beta$ je daný kovektor platný. Horní index $\beta$ či $\chi$ značí, jestli kovektor měří stočení či elipticitu.} $\Dtks^\beta(\beta)=\frac{1}{2}(0, -\sin2\beta, \cos2\beta, 0)$, resp. $\Dtks^\chi(\beta)=\frac{1}{2}(0, 0, 0, 1)$, které měří stočení, resp. elipticitu vyjádřenou změnou Stokesova vektoru $\textrm{d}\Stks$:
\begin{align}
    \Dtks^\beta(\beta) \cdot \Stks(\beta) = 0 \,, \quad &\textrm{d}\beta = \Dtks^\beta \cdot \textrm{d}\Stks \\
    \Dtks^\chi(\beta) \cdot \Stks(\beta) = 0 \,, \quad &\textrm{d}\chi = \Dtks^\chi \cdot \textrm{d}\Stks \,.
\end{align}
Rozvedeme Muellerovu matici \eqref{eqn:Mueller-rozklad} vzorku do prvního řádu\footnote{Striktně vzato po tomto kroku již nejde o mocninný rozvoj měřeného signálu v $\vec{M}$, protože zahazujeme některé kvadratické členy a ponecháváme jiné.
Pro malá stočení jsou však zahozené členy silně potlačeny.} v $\mathcal{R}'$ (vyjádřeného diferenciálem $\textrm{d}\mathcal{R}$ v okolí jednotkové matice\footnote{Píšeme $\mathcal{R}= \begin{pmatrix} 1&0\\0&1 \end{pmatrix} + \textrm{d}\mathcal{R}$.}) 
\begin{align}
\label{eqn:dif-Mueller}
\textrm{d}M_{00} = \Re \operatorname{Tr} \lbrace\textrm{d}\mathcal{R} \rbrace\\
    \textrm{d}M_{i0} = \textrm{d}M_{0i} = \Re \operatorname{Tr} \lbrace \sigma_i \textrm{d}\mathcal{R} \rbrace \\
    \textrm{d}M_{ij} = \delta_{ij} \Re\operatorname{Tr}\lbrace\textrm{d}\mathcal{R}\rbrace + \epsilon_{ijk} \Im\operatorname{Tr}\lbrace\sigma_k\textrm{d}\mathcal{R}\rbrace
\end{align}
pro $i,\,j = 1,\,2,\,3$.

Stočení
\begin{equation}
    \textrm{d}\beta = \frac{1}{2}\begin{pmatrix} -\sin2\beta&\cos2\beta \end{pmatrix} \begin{pmatrix} \textrm{d}M_{10}&\textrm{d}M_{11}&\textrm{d}M_{12}\\\textrm{d}M_{20}&\textrm{d}M_{21}&\textrm{d}M_{22} \end{pmatrix} \begin{pmatrix} 1\\\cos2\beta\\\sin2\beta \end{pmatrix}
\end{equation}
a elipticita
\begin{equation}
    \textrm{d}\chi = \frac{1}{2}\begin{pmatrix} \textrm{d}M_{30}&\textrm{d}M_{31}&\textrm{d}M_{32} \end{pmatrix} \begin{pmatrix} 1\\\cos2\beta\\\sin2\beta \end{pmatrix} \,,
\end{equation}
jsou po dosazení \eqref{eqn:dif-Mueller} kompaktně
\begin{equation}
    \label{eqn:dbeta-stokes}
    \textrm{d}\beta + i \textrm{d}\chi = \frac{1}{2} \operatorname{Tr} \lbrace \left( -\sigma_1\sin2\beta+\sigma_2\cos2\beta+i\sigma_3   \right) \textrm{d}\mathcal{R} \rbrace
\end{equation}

Vidíme, že v okolí izotropního odrazu/průchodu jsou jediné povolené $\beta$-závislosti stočení a elipticity dané třemi členy: $\cos2\beta$, $\sin2\beta$ a konstantou\footnote{Stočení konstantní pro všechna $\beta$. Např. Faradayův jev je způsoben tímto členem.}.
Konstantní členy $\propto \operatorname{Tr}\lbrace \sigma_3 \textrm{d}\mathcal{R} \rbrace$ jsou navíc často vyloučeny symetrií, konkrétně ve všech případech studovaných v této práci: při kolmém dopadu na [001]-normálově orientovaný kubický vzorek s in-plane magnetizací.
Pak jsou povolené jen členy harmonické s frekvencí $2\beta$, které se složí do vzorečku \eqref{eqn:PMLD-ansatz}.

Poznamenejme, že nemagnetická část reflexní matice $\mathcal{R}'_0$ zanáší do měřeného signálu pouze konstantu, kterou můstek měřit nedokáže.

Dále se budeme věnovat situaci relevantní pro tuto práci, tzn. měřeno je pouze stočení a na základě předpokládané kubické symetrie, kolmého dopadu a in-plane magnetizace neuvažujeme konstantní člen v \eqref{eqn:dbeta-stokes}.

Předpokládáme, že vzorek je v jedno-doménovém stavu se saturovanou in-plane magnetizací (Stonerův-Wohlfarthův model z oddílu \ref{chap:magneticka-anizotropie}).
Díky tomu se každý člen řádu $k$ mocninného rozvoje v $\vec{M}$ redukuje na harmonickou funkci $k\phim$.
Do druhého řádu se tedy vyskytují členy $\cos\phim$, $\sin\phim$, $\cos2\phim$, $\sin2\phim$ a konstanta, kterou nedokážeme změřit kvůli vyvažování můstku ($\xi(\beta)$).
První dva členy jsou lineární MO jevy a většinou jsou kvůli téměř kolmému dopadu ($< \SI{1}{\degree}$) poměrně malé.

Zajímáme se pouze o kvadratické jevy, proto je od lineárních odseparujeme stejným způsobem jako metoda rotujícího pole (rovnice \eqref{eqn:rotmoke-separace}).
Předpokládáme in-plane magnetickou anizotropii s dvoučetnou rotační symetrií, pak platí $\phim(\phih+\SI{180}{\degree})=\phim(\phih)+\SI{180}{\degree}$ a symetrizaci podle $\vec{M}$ můžeme provést pomocí symetrizace podle $\vHext$:
\begin{equation}
    \label{eqn:symetrizace-H}
    \Delta\beta^\textrm{Q}(\phih) = \frac{1}{2}\left(\Delta\beta(\phih) + \Delta\beta(\phih+\SI{180}{\degree})\right)
\end{equation}

V dalším předpokládáme, že symetrizace byla provedena a $\Delta\beta^\textrm{Q}$ značíme bez indexu jako $\Delta\beta$.
Poznamenáme však, že tato symetrizace teoreticky není nezbytná.
V konečném důsledku jsou fitovány koeficienty mocninného rozvoje a principiálně není problém fitovat o několik parametrů navíc.
V této práci jsme se o to ale nepokoušeli.

Pro každé změřené $\beta$ máme tedy dva neznámé koeficienty funkcí $\cos2\phim$ a $\sin2\phim$.
Za splnění předpokladů vedoucích na \eqref{eqn:dbeta-stokes} je pak $\beta$-závislost této dvojice koeficientů také popsána dvojicí koeficientů $\cos2\beta$ a $\sin2\beta$, celkem máme pro celou sadu měření 4 koeficienty.
Používaný model je tedy
\begin{alignat}{2}
    \label{eqn:PMLD-matice}
    \Delta\beta &= && \left(P_{11} \cos2\phim + P_{12}\sin2\phim\right)\cos2\beta \\
                    & && + \left(P_{21}\cos2\phim + P_{22}\sin2\phim\right)\sin2\beta \\
                    &\equiv & & P_+ \sin2\left[+(\phim -\pi_+) - \beta\right] \\
                    &  & & + P_- \sin2\left[-(\phim-\pi_-) - \beta\right]
\end{alignat}
s vyjádřením parametrů dvěma ekvivalentními způsoby.
Pro účely fitu používáme vyjádření první rovností, protože je v parametrech lineární.
Pro prezentování výsledků používáme druhý způsob\footnote{Vztah obou vyjádření je v principu stejný jako vyjádření polarizace světla v bázi kolmých lineárních polarizací ($P_{ij}$) nebo kruhových polarizací ($P_{+/-}$)}.

Odpovídající Jonesova matice je 
\begin{align}
    \label{eqn:dR-kubicky}
    \textrm{d}\mathcal{R}_M = &P_+ \left[\sigma_1\cos2(\phim-\pi_+) + \sigma_2 \sin2(\phim-\pi_+)\right] \\ 
                              & + P_- \left[\sigma_1\cos2(\phim-\pi_-) - \sigma_2 \sin2(\phim-\pi_-) \right] \,,
\end{align}
vidíme tedy, že člen úměrný $P_+$ otáčí svou optickou osu spolu s magnetizací, člen $P_-$ opačným směrem.

Při otáčení vzorku v rovině $xy$ jsou $P_+$, $P_-$, $\pi_+$ nezávislé na úhlu natočení $\gamma$.
Jediný $\pi_-$ se transformuje způsobem $\pi_-(\gamma')=\pi_-(\gamma)+2(\gamma'-\gamma)$.
Čtyři parametry $P_+$, $P_-$, $\pi_+$, $(\pi_--2\gamma)$ lze tedy považovat za parametry vzorku, nezávislé na souřadné soustavě.
Člen úměrný $P_+$ je nezávislý na natočení vzorku a v izotropních materiálech se přímo jedná o $P$ ze vzorce \ref{eqn:PMLD}.
Naopak $P_-$ je v izotropních vzorcích zakázán symetrií.

Při kolmém dopadu jsou Jonesovy matice úměrné $\varepsilon^\perp-\varepsilon^\vert\varepsilon^-/n^2$ (viz oddíl \ref{chap:optika-v-multivrstvach}, dodatek \ref{app:berreman}).
Pro [100]-normálově orientovaný kubický vzorek můžeme dosadit tvar magnetické permitivity a dostat (pro $\gamma$ značící směr jedné z hlavních krystalografických os)
\begin{align}
    \label{eqn:PMLD-kubicke}
    P_+ = P_0 \left(\frac{G_s}{2} - \frac{K^2}{n^2}\right) \frac{M_S^2}{2} \,,\quad \pi_+=0 \,,\\
    P_- = P_0 \left(\frac{\Delta G}{2}\right) \frac{M_S^2}{2} \,,\quad \pi_-=2\gamma
\end{align}
s ``extrakčním faktorem'' $P_0$, který vyjadřuje, jakou měrou se v Jonesově matici projevují změny permitivity, a závisí na nemagnetických parametrech vzorku, tj. tloušťce vrstev, jejich indexech lomu, atd.
Po dosazení do \eqref{eqn:PMLD-matice} je vzorec ekvivalentní \eqref{eqn:QMOKE-vzorec} v kolmém dopadu ($P_0$ je obdobou konstant $A_{s/p}$).

Přestože pro kubický [100]-normálově orientovaný vzorek platí $\pi_+=0$ a $\pi_--2\gamma=0$, ve zpracování je připouštíme.
Souřadné soustavy polarizace ($\beta$) a magnetu ($\phih$, $\phim$) byly totiž stanoveny zcela nezávislými způsoby a pravděpodobně jsou proto spojeny vzájemnou rotací o malý úhel ($<\SI{5}{\degree}$).
Oběma úhlům $\pi_+ \equiv \pi_--2\gamma$ tedy přikládáme nový význam zmíněného ofsetu.
Úhel rotace vzorku $\gamma$ se pak určí jako $2\gamma = \pi_- - \pi_+$.

Pro kubické vzorky používáme v soustavě spojené se vzorkem ještě jednu parametrizaci.
Označíme $\gamma$ úhel natočení [100], [110] nebo některý z jim ekvivalentních krystalografických směrů magnetické vrstvy.
Parametry $P_\gamma$, resp. $P_{\gamma+\SI{45}{\degree}}$ pak vyjadřují sílu kvadratického jevu při magnetizaci ve význačných směrech $\gamma$ a $\gamma+\SI{45}{\degree}$ a lze je vizuálně přibližně odečítat z měřených dat.
Dosazením \eqref{eqn:PMLD-kubicke} do \eqref{eqn:PMLD-matice} platí
\begin{equation}
    \Delta\beta = -P_\gamma \cos 2 (\phim-\gamma) \sin 2(\beta-\gamma) + P_{\gamma+\SI{45}{\degree}} \sin 2 (\phim-\gamma) \cos 2(\beta-\gamma) \,.
\end{equation}
Při orientaci polarizace $\beta=\gamma$ je amplituda změřené křivky $\Delta\beta(\phih)$ přímo $P_{\gamma}$, při polarizaci ve směru $\beta=\gamma+\SI{45}{\degree}$ je amplituda $P_{\gamma+\SI{45}{\degree}}$, viz obr. \ref{fig:urceni-MLD-ilustrace}.
Platí
\begin{equation}
    P_{\gamma} =  P_+ + P_- \,,\quad P_{\gamma+\SI{45}{\degree}} = P_+ - P_- \,.
\end{equation}

\begin{figure}[htbp]
    \centering
    \includegraphics{./data/out/pmld-ukazka.pdf}
    \caption{Určení MLD koeficientů $P$. Měřená data s CoFe, pokojová teplota, \SI{1050}{\nano\meter}, $\gamma\approx\SI{0}{\degree}$. Hodnoty $P$ lze odečítat přímo z grafu, na obrázku jsou oba vyznačené koeficienty kladné.}
    \label{fig:urceni-MLD-ilustrace}
\end{figure}

Pro určení síly kvadratického MO jevu (popsanou fenomenologickými parametry $P$) je nutné znát měřený signál v závislosti na $\phim$.
V praxi vždy během analýzy určujeme i magnetickou anizotropii, která nám převod $\phih \mapsto \phim$ poskytne.
Pokud není magnetická anizotropie srovnatelná s vnějším polem, pak je možné poměrně přesně určit $P$ i z dat s předpokladem $\phim=\phih$.

